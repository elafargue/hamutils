# AX25 Protocol Overview

## What is AX25?

AX.25 (Amateur X.25) is a data link layer protocol originally derived from layer 2 of the X.25 protocol suite and designed for use by amateur radio operators. It is used extensively on amateur packet radio networks.

## Key Features

- **Data Link Layer Protocol**: Responsible for establishing link layer connections, transferring data encapsulated in frames between nodes, and detecting errors introduced by the communications channel
- **Source Routing**: Uses a simple source routing mechanism using digipeaters (digital repeaters)
- **Frame Structure**: Uses HDLC frame syntax with variable-length address fields containing source, destination, and repeater addresses

## Digipeater Path Routing

### How Digipeaters Work

Digipeaters act as simplex repeaters, receiving, decoding and retransmitting packets from local stations. They allow multi-hop connections to be established between two stations unable to communicate directly.

### The Asterisk (*) Symbol

**Critical Understanding**: The asterisk (*) symbol in AX25 paths indicates that a digipeater has been "used" or "has repeated" the packet.

- **Unmarked digipeaters**: Digipeaters in the path without an asterisk have not yet been used
- **Marked digipeaters**: Digipeaters with an asterisk (*) have successfully repeated the packet
- **Last asterisk**: The last digipeater in the path with an asterisk is the one we can hear directly

### Example Path Analysis

Looking at a typical log entry:
```
udr0: fm K7BBS to BEACON via HMKR* KRDG* KBANN* KBETH* WOODY* KJOHN* KROCK ctl UI pid=F0(Text)
```

In this example:
- **K7BBS** is the originating station
- **HMKR**, **KRDG**, **KBANN**, **KBETH**, **WOODY**, **KJOHN** all have asterisks, meaning they have repeated the packet
- **KROCK** has no asterisk, meaning it hasn't repeated the packet yet
- **KJOHN** is the last digipeater with an asterisk, so this is the station we can hear directly

### Network Topology Understanding

The AX25 network forms a mesh where:
1. **Source stations** originate packets (like K7BBS, N6ACK, etc.)
2. **Digipeaters** repeat packets to extend range (like HMKR, KRDG, KBANN, etc.)
3. **Receiving stations** monitor the channel and can hear packets from nearby digipeaters

### What "Nodes I Can Hear" Means

In the context of this analysis, a node is considered "hearable" (directly reachable by our station) if:

1. **Direct transmission**: We receive packets from that node with no "via" path at all
2. **Undigipeated path available**: We receive packets that include at least one "via" path sequence where no digipeaters have asterisks (meaning the packet hasn't been digipeated yet on that path)

**Examples:**

```
ax0: fm K6FB to BEACON ctl UI pid=F0(Text) len 48
```
→ K6FB is hearable (no via path = direct transmission)

```
ax0: fm AB6BR to TONY via WOODY KJOHN KBERR KBULN KBANN ctl UI pid=F0(Text) len 4
```
→ AB6BR is hearable (via path exists but no asterisks = undigipeated transmission we can hear directly)

```
ax0: fm AB6BR to TONY via WOODY* KJOHN KBERR KBULN KBANN ctl UI pid=F0(Text) len 4
```
→ AB6BR is NOT hearable by us anymore (all observed paths have been digipeated, so we're hearing it through WOODY)

**Important distinction from previous logic**: The old logic only looked for the "last starred digipeater" as the hearable node. The new logic correctly identifies the **source station** as hearable when we can receive its undigipeated transmissions.

This represents the digipeaters that are within our radio range
- These are the "gateway" nodes through which we access the wider network

## Protocol Versions

- **AX.25 v2.0**: Original version establishing basic link layer functionality
- **AX.25 v2.2 (1998)**: Improved efficiency with larger payload sizes, extended sequence numbers, and selective reject capability

## Applications

- **APRS** (Automatic Packet Reporting System): Most common modern use
- **Packet BBS** systems: Bulletin board systems
- **TCP/IP over AX25**: Internet protocol tunneling (AMPRNet)
- **Point-to-point messaging**: Direct station-to-station communication

## Technical Details

- **Frequencies**: 
  - North America: 144.39 MHz
  - Europe: 144.80 MHz  
  - Australia: 145.175 MHz
- **Speeds**: Typically 1200 baud (Bell 202 tones) or 9600 baud
- **Frame Format**: Based on HDLC with amateur radio callsigns as addresses
- **Path Limitation**: Maximum 8 digipeater hops typically supported

## References

- [AX.25 Link Access Protocol for Amateur Packet Radio v2.2](http://www.tapr.org/pdf/AX25.2.2.pdf) - TAPR
- [Wikipedia: AX.25](https://en.wikipedia.org/wiki/AX.25)
- [APRS Official Website](http://www.aprs.org/) - Bob Bruninga, WB4APR

---

*This document provides the foundational understanding needed to analyze AX25 packet logs and understand network topology from the perspective of a receiving station.*